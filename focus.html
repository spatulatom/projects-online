<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Focus-Within Explained</title>
    <meta
      name="description"
      content="Understanding focus and focus-within in CSS and Tailwind"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Example 1: Plain CSS with focus-within on parent */
      .example1-form {
        border: 2px solid #ccc;
        padding: 1rem;
        margin-bottom: 1rem;
        transition: all 0.3s ease;
      }

      .example1-form:focus-within {
        border-color: blue;
        background-color: #f0f8ff;
        box-shadow: 0 0 10px rgba(0, 0, 255, 0.3);
      }

      /* Example 2: Plain CSS with focus-within targeting child styling */
      .example2-form {
        border: 2px solid #ccc;
        padding: 1rem;
        margin-bottom: 1rem;
      }

      .example2-form input {
        border: 1px solid #ccc;
        padding: 0.5rem;
        transition: all 0.3s ease;
      }

      .example2-form:focus-within input {
        /* This applies to ALL inputs when ANY field has focus */
        border-color: purple;
        background-color: #f8f0ff;
      }

      /* Focus indicator for the examples */
      .focus-indicator {
        color: #888;
        font-size: 0.875rem;
        margin-top: 0.5rem;
      }

      .example1-form:focus-within .focus-indicator,
      .example2-form:focus-within .focus-indicator {
        color: #008800;
        font-weight: bold;
      }
    </style>
  </head>
  <body class="bg-gray-100 p-6">
    <header class="max-w-4xl mx-auto mb-8">
      <h1 class="text-3xl font-bold text-center mb-4">
        Understanding focus-within
      </h1>
      <p class="text-center text-gray-600">
        This page demonstrates how focus-within works in both plain CSS and
        Tailwind
      </p>
    </header>

    <main class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8">
      <!-- Example 1: Plain CSS with focus-within on parent -->
      <section class="bg-white rounded-lg shadow-md p-6">
        <h2 class="text-xl font-bold mb-4">
          Example 1: Plain CSS - Focus-Within on Parent
        </h2>
        <p class="mb-4 text-sm">
          The <code>focus-within</code> is applied to the form itself. When any
          child element receives focus, the form changes style.
        </p>

        <form class="example1-form">
          <div class="mb-4">
            <label class="block mb-1" for="ex1-name">Name:</label>
            <input
              type="text"
              id="ex1-name"
              class="w-full p-2"
              placeholder="Type here..."
            />
          </div>
          <div class="mb-4">
            <label class="block mb-1" for="ex1-email">Email:</label>
            <input
              type="email"
              id="ex1-email"
              class="w-full p-2"
              placeholder="email@example.com"
            />
          </div>
          <div class="focus-indicator">↑ Try focusing on any field above ↑</div>
        </form>

        <pre class="bg-gray-100 p-3 rounded text-sm mt-4 overflow-x-auto">
.example1-form {
    border: 2px solid #ccc;
}

.example1-form:focus-within {
    border-color: blue;
    background-color: #f0f8ff;
}</pre
        >
      </section>

      <!-- Example 2: Plain CSS with focus-within targeting child styling -->
      <section class="bg-white rounded-lg shadow-md p-6">
        <h2 class="text-xl font-bold mb-4">
          Example 2: Plain CSS - Focus-Within Targeting Children
        </h2>
        <p class="mb-4 text-sm">
          The <code>focus-within</code> is on the parent, but targets all child
          inputs. When any field gets focus, all inputs get styled.
        </p>

        <form class="example2-form">
          <div class="mb-4">
            <label class="block mb-1" for="ex2-name">Name:</label>
            <input
              type="text"
              id="ex2-name"
              class="w-full p-2"
              placeholder="Type here..."
            />
          </div>
          <div class="mb-4">
            <label class="block mb-1" for="ex2-email">Email:</label>
            <input
              type="email"
              id="ex2-email"
              class="w-full p-2"
              placeholder="email@example.com"
            />
          </div>
          <div class="focus-indicator">↑ Try focusing on any field above ↑</div>
        </form>

        <pre class="bg-gray-100 p-3 rounded text-sm mt-4 overflow-x-auto">
.example2-form input {
    border: 1px solid #ccc;
}

.example2-form:focus-within input {
    /* Applies to ALL inputs when ANY input has focus */
    border-color: purple;
    background-color: #f8f0ff;
}</pre
        >
      </section>

      <!-- Example 3: Tailwind CSS with focus-within on parent -->
      <section class="bg-white rounded-lg shadow-md p-6">
        <h2 class="text-xl font-bold mb-4">
          Example 3: Tailwind - Focus-Within on Parent
        </h2>
        <p class="mb-4 text-sm">
          Using Tailwind's <code>focus-within:</code> modifier directly on the
          parent element.
        </p>

        <form
          class="border-2 border-gray-300 p-4 rounded transition-all duration-300 focus-within:border-blue-500 focus-within:bg-blue-50 focus-within:shadow-md"
        >
          <div class="mb-4">
            <label class="block mb-1" for="ex3-name">Name:</label>
            <input
              type="text"
              id="ex3-name"
              class="w-full p-2 border border-gray-300 rounded"
              placeholder="Type here..."
            />
          </div>
          <div class="mb-4">
            <label class="block mb-1" for="ex3-email">Email:</label>
            <input
              type="email"
              id="ex3-email"
              class="w-full p-2 border border-gray-300 rounded"
              placeholder="email@example.com"
            />
          </div>
          <div
            class="text-gray-500 text-sm focus-within:text-green-600 focus-within:font-bold"
          >
            ↑ Try focusing on any field above ↑
          </div>
        </form>

        <pre class="bg-gray-100 p-3 rounded text-sm mt-4 overflow-x-auto">
&lt;form class="border-2 border-gray-300 p-4
  focus-within:border-blue-500 
  focus-within:bg-blue-50"&gt;
  ...
&lt;/form&gt;</pre
        >
      </section>

      <!-- Example 4: Tailwind CSS with group-focus-within targeting children -->
      <section class="bg-white rounded-lg shadow-md p-6">
        <h2 class="text-xl font-bold mb-4">
          Example 4: Tailwind - Group-Focus-Within
        </h2>
        <p class="mb-4 text-sm">
          Using Tailwind's <code>group</code> and
          <code>group-focus-within:</code> to style children when parent
          contains focus.
        </p>

        <form class="group border-2 border-gray-300 p-4 rounded">
          <div class="mb-4">
            <label class="block mb-1" for="ex4-name">Name:</label>
            <input
              type="text"
              id="ex4-name"
              class="w-full p-2 border border-gray-300 rounded transition-all duration-300 group-focus-within:border-purple-500 group-focus-within:bg-purple-50"
              placeholder="Type here..."
            />
          </div>
          <div class="mb-4">
            <label class="block mb-1" for="ex4-email">Email:</label>
            <input
              type="email"
              id="ex4-email"
              class="w-full p-2 border border-gray-300 rounded transition-all duration-300 group-focus-within:border-purple-500 group-focus-within:bg-purple-50"
              placeholder="email@example.com"
            />
          </div>
          <div
            class="text-gray-500 text-sm group-focus-within:text-purple-600 group-focus-within:font-bold"
          >
            ↑ Try focusing on any field above ↑
          </div>
        </form>

        <pre class="bg-gray-100 p-3 rounded text-sm mt-4 overflow-x-auto">
&lt;form class="group border-2 border-gray-300 p-4"&gt;
  &lt;input class="border border-gray-300
    group-focus-within:border-purple-500
    group-focus-within:bg-purple-50"&gt;
  ...
&lt;/form&gt;</pre
        >
      </section>

      <!-- Bonus: The Dropdown Example Explained -->
      <section class="bg-white rounded-lg shadow-md p-6 md:col-span-2">
        <h2 class="text-xl font-bold mb-4">Your Dropdown Case Explained</h2>
        <p class="mb-4">In your original dropdown menu, here's what happens:</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
          <div>
            <h3 class="font-bold mb-2">With <code>group-focus:</code></h3>
            <ol class="list-decimal ml-6 space-y-2">
              <li>
                You Tab to the parent <code>&lt;div role="button"&gt;</code>
              </li>
              <li>
                Parent gets focus → <code>group-focus</code> activates →
                dropdown appears
              </li>
              <li>You Tab again to first button inside dropdown</li>
              <li>Focus moves away from parent to the button</li>
              <li>
                Parent no longer has focus →
                <code>group-focus</code> deactivates → dropdown disappears!
              </li>
            </ol>
          </div>

          <div>
            <h3 class="font-bold mb-2">
              With <code>group-focus-within:</code>
            </h3>
            <ol class="list-decimal ml-6 space-y-2">
              <li>
                You Tab to the parent <code>&lt;div role="button"&gt;</code>
              </li>
              <li>
                Parent gets focus → <code>group-focus-within</code> activates →
                dropdown appears
              </li>
              <li>You Tab again to first button inside dropdown</li>
              <li>
                Focus moves to the button, but it's still <i>within</i> the
                parent
              </li>
              <li>
                Parent still has <code>focus-within</code> → dropdown stays
                visible
              </li>
              <li>You can Tab through all buttons in the dropdown</li>
              <li>
                Only when you Tab away from the last button does the dropdown
                disappear
              </li>
            </ol>
          </div>
        </div>

        <!-- Interactive Demo of the Dropdown -->
        <div class="mt-8 border-t pt-6">
          <h3 class="font-bold mb-4">Interactive Demo:</h3>
          <p class="mb-4 text-sm">
            Try tabbing through these two dropdown buttons. Notice how the first
            one closes immediately when you try to tab to its contents, while
            the second one stays open until you tab away completely.
          </p>

          <div class="flex justify-center space-x-12">
            <!-- Dropdown with group-focus -->
            <div class="relative">
              <div
                tabindex="0"
                role="button"
                class="group bg-gray-200 px-4 py-2 rounded cursor-pointer border-2 border-gray-400 focus:outline-none focus:border-blue-500"
              >
                With group-focus (broken)
                <div
                  class="hidden group-hover:block group-focus:block absolute top-full left-0 mt-1 bg-white border border-gray-300 rounded shadow-lg p-2 w-48"
                >
                  <button
                    class="block w-full text-left px-2 py-1 hover:bg-gray-100 rounded"
                  >
                    Option 1
                  </button>
                  <button
                    class="block w-full text-left px-2 py-1 hover:bg-gray-100 rounded"
                  >
                    Option 2
                  </button>
                  <button
                    class="block w-full text-left px-2 py-1 hover:bg-gray-100 rounded"
                  >
                    Option 3
                  </button>
                </div>
              </div>
            </div>

            <!-- Dropdown with group-focus-within -->
            <div class="relative">
              <div
                tabindex="0"
                role="button"
                class="group bg-gray-200 px-4 py-2 rounded cursor-pointer border-2 border-gray-400 focus:outline-none focus:border-blue-500"
              >
                With group-focus-within (works)
                <div
                  class="hidden group-hover:block group-focus-within:block absolute top-full left-0 mt-1 bg-white border border-gray-300 rounded shadow-lg p-2 w-48"
                >
                  <button
                    class="block w-full text-left px-2 py-1 hover:bg-gray-100 rounded"
                  >
                    Option 1
                  </button>
                  <button
                    class="block w-full text-left px-2 py-1 hover:bg-gray-100 rounded"
                  >
                    Option 2
                  </button>
                  <button
                    class="block w-full text-left px-2 py-1 hover:bg-gray-100 rounded"
                  >
                    Option 3
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="max-w-4xl mx-auto mt-12 text-center text-gray-500 text-sm">
      <p>
        This page demonstrates the differences between focus, focus-within, and
        how they work in both plain CSS and Tailwind CSS.
      </p>
      <h1 class="mt-6 text-lg font-semibold">
        i would assume here that when i tab to the parent it get focus becue it
        has tabindex - but since the tab is not yet on the descenadt that on can
        not trigger focus-within at that point - yet it smehow dose?
      </h1>
      <p>
        Great question! Actually, when you tab to the parent element with
        tabindex="0", the parent itself receives focus. In CSS, this means:
        :focus is true for the parent. :focus-within is also true for the
        parent, because the parent contains the focused element (in this case,
        itself). So, focus-within is triggered even if the parent itself is
        focused, not just its descendants. <strong>This is by design: :focus-within
        matches an element if IT or any of ITS descendants have focus. </strong>Summary:
        When you tab to the parent, both :focus and :focus-within are active.
        When you tab into a child, only :focus-within is active on the parent
        (unless the child bubbles focus back up). This is why your dropdown
        stays open as soon as you tab to the parent, and remains open as you tab
        through its children.
      </p>
    </footer>
  </body>
</html>